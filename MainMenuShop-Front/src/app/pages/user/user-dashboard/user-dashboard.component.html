<!DOCTYPE html>
<html>
<head>
	<title>División de pantalla en 4 zonas</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

</head>
<body>
<nav class="navbar">
  <ul class="navbar-nav">
    <li class="nav-item">
      <a href="#" class="nav-link">Inicio</a>
    </li>
    <li class="nav-item">
      <a href="#" class="nav-link"> {{usuarioActual.nombre}}</a>
    </li>

  </ul>
  <ul class="navbar-nav ml-auto">
    <li class="nav-item">
      <a href="#" class="textNavBtn">Pedido entrega en tienda</a>
    </li>
    <li class="nav-item">
      <a href="#" class="fas fa-undo"> </a>
    </li>
    <li class="nav-item">
      <a href="#"  class="fas fa-chart-bar"> </a>
    </li>
    <li class="nav-item">
       <a href="#" class="fas fa-briefcase"> </a>
    </li>
  </ul>
</nav>

<!--

-->


    <div id="contenedor1" class="contenedor">
      <div class="contenedor1-barra-busqueda">
        <form (ngSubmit)="buscarCliente()" *ngIf="clienteActual == null">
          <button class="btn-borrarArt"  (click)="borrarCliente()"><i class="fa-solid fa-xmark"></i></button>
         <input type="text" [(ngModel)]="terminoBusquedaCliente" name="terminoBusquedaCliente" placeholder="Introduzca cliente...">
        </form>
        <form *ngIf="clienteActual != null">
          <button class="btn-borrarArt"  (click)="borrarCliente()"><i class="fa-solid fa-xmark"></i></button>
          <input type="text" placeholder="{{clienteActual.nombre}}&nbsp;{{clienteActual.apellido1}}&nbsp;{{clienteActual.apellido2}}">
        </form>
       </div>
      <div class="contenedor1-lateral-izquierdo">
        <div class="datos-cliente" *ngIf="clienteActual != null">
          <h5 class="h5-c1">DNI:  <small>{{clienteActual.dni}}</small></h5>
          <h5 class="h5-c1">Telefono:  <small>{{clienteActual.numeroTelefono}}</small></h5>
          <h5 class="h5-c1">Email: <small>{{clienteActual.email}}</small></h5>
        </div>
        <div class="datos-cliente" *ngIf="clienteActual == null">
          <h5 class="h5-c1">DNI:   </h5>
          <h5 class="h5-c1">Telefono:   </h5>
          <h5 class="h5-c1">Email: </h5>
        </div>
      </div>
      <div class="contenedor1-lateral-derecho">
        <button (click)="mostrarDatosCliente()" class="btn-page"><i class="fa fa-file"></i></button>
        <button (click)="mostrarCrearCliente()" class="btn-page"><i class="fa fa-plus"></i></button>
        <button (click)="mostrarModificarCliente()" class="btn-page"><i class="fa-solid fa-pen-to-square"></i></button>
      </div>


    </div>




    <div id="contenedor2" class="contenedor">
      <form (ngSubmit)="buscar()" *ngIf="productoActual == null">
        <button class="btn-borrarArt"  (click)="borrarArticulo()">X</button>
      <input type="text" [(ngModel)]="terminoBusqueda" name="terminoBusqueda" placeholder="Introduzca articulo...">
    </form>
      <form *ngIf="productoActual != null">
        <button class="btn-borrarArt"  (click)="borrarArticulo()">X</button>

        <input  type="text" [(ngModel)]="terminoBusqueda" name="terminoBusqueda" placeholder="{{productoActual.nombre}}">

      </form>
       <div class="datos-articulo" *ngIf="productoActual != null">
        <h5  class="h5-separado">Precio: {{productoActual.precio}} </h5>
        <h5  class="h5-separado">Lote:  {{productoActual.Lote}}</h5>
        <h5  class="h5-separado">Familia:  {{productoActual.familia}}</h5>
        <h5  class="h5-separado">Unidades <input class="unidades-articulo" [(ngModel)]="cantidadUnidades" type="number" min="1" max="99" value="1">
        </h5>
       </div>
      <div class="datos-articulo" *ngIf="productoActual == null">
        <h5  class="h5-separado">Precio:  </h5>
        <h5  class="h5-separado">Lote:  </h5>
        <h5  class="h5-separado">Familia:  </h5>
        <h5  class="h5-separado">Unidades <input class="unidades-articulo" type="number" min="1" max="99">
        </h5>
       </div>
       
      <div class="boton-visualizador">
        <button (click)="mostrarDatosArticulo()" class="btn-page"><i class="fa fa-file"></i></button>
        <button class="btn-page"><i class="fa fa-house" style="color: #ffffff;"></i></button>
      </div>
    </div>

    <div id="contenedor3" class="contenedor">
      <div id="cesta" class="contenedor-interior">
        <div class="titulo-cesta">
          <p>Artículo</p>
          <p>Precio</p>
        </div>
        <div class="Objeto-cesta"  >
        <table class="center">
          <tbody>
            <tr *ngFor="let resultadoCliente of resultadosCliente" (dblclick)="seleccionarCliente(resultadoCliente)">
              <td><strong>{{resultadoCliente.nombre}} {{resultadoCliente.apellido1}} {{resultadoCliente.apellido2}} | {{resultadoCliente.dni}} || {{resultadoCliente.numeroMovil}} || {{resultadoCliente.localidad}}</strong>
            </tr>
          </tbody>
        </table>

        <table>
          <tbody>
            <tr *ngFor="let producto of cesta" (dblclick)="eliminarDeCesta(producto)">
              <td>[{{producto.referencia}}]&nbsp;{{producto.nombre}}</td>
              <span *ngIf="clienteActual && clienteActual.rol === 'EMPLEADO'">{{(producto.precio * 0.8).toFixed(2)}}€</span>
                  <span *ngIf="!clienteActual || clienteActual.rol !== 'EMPLEADO'">{{producto.precio}}€</span>
            </tr>
          </tbody>
        </table>
        </div>
      </div>

       <div class="botones-contenedor3">
        <button class="botones-contenedor3-estilo" (click)="mostrarPanelCobro()" (click)="totalCesta()">Finalizar venta</button>
        <button class="botones-contenedor3-estilo" (click)="aparcarCesta()">Aparcar venta</button>
        <button class="botones-contenedor3-estilo">Hacer encargo</button>
        <button class="botones-contenedor3-estilo" (click)="vaciarCestaCompleta()">Cancelar</button>
        <button class="botones-contenedor3-estilo" >Hacer algo</button>
        <button class="botones-contenedor3-estilo">Hacer algo</button>

      </div>
    </div>


    <div id="contenedor4" class="contenedor">
      <div  id = "fondo-tabla" class="fondo-tabla">

        <table class="center">
          <tbody>
            <ng-container *ngFor="let resultado of resultados">
              <tr [ngClass]="{'producto-gris': resultado.estado === 'no encargable'}" (dblclick)="aniadircesta(resultado)" (click)="seleccionarProducto(resultado)">
                <td>
                  <strong>{{resultado.nombre}}</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <span *ngIf="clienteActual && clienteActual.rol === 'EMPLEADO'">{{(resultado.precio * 0.8).toFixed(2)}}€</span>
                  <span *ngIf="!clienteActual || clienteActual.rol !== 'EMPLEADO'">{{resultado.precio}}€</span>
                  <br>
                  <small>{{resultado.referencia}} · {{resultado.familia}} · {{resultado.tipo}} · {{resultado.marca}} · {{resultado.estado}}</small>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>




    </div>
    </div>
    <div id="contenedor5" class="contenedor">
      <button  (click) = "logout()" class="negro">Cambiar de usuario</button>
       <button (click)="mostrarRecuperarTicket()" class="rojo">Recuperar Ticket</button>
      <button (click)="mostrarDevolverTicket()" class="morado">Devolver ticket</button>
      <button (click)="mostrarConsultarTicket()" class="rojo">Consultar Ticket</button>
      <button class="azul">Retirada efectivo</button>
      <button (click)="mostrarCierreCaja()" class="gris">Cierre caja</button>
      <button class="verde">Contrato</button>
      <button class="gris">Abrir cajón (F8)</button>
      <button onclick="window.open('/almacen', '_blank')" class="rojo">Almacén</button>

      <button class="gris">Sincro manual</button>
 
    </div>
     
    <div id="pie-pagina" class="contenedor">
      <h3>Cupones y Promociones</h3>
    </div>
<!--
   <button (click)="ocultarPanelCobro()">X</button>
  <h1 class="precio-final">{{total}}€</h1>
              <input type="text" [(ngModel)]="dineroEfectivo" name="dineroEfectivo" placeholder="Introduzca articulo...">

-->
    <div class="formulario-panel-cobro" [hidden]="!formularioPanelCobro">
      <div class="formulario-panel-cobro-parte-alta">
        <div class="formulario-panel-cobro-parte-alta-division1">
          <button class="btn-cerraPanelCobro" (click)="ocultarPanelCobro()">X</button>
        </div>
        <div class="formulario-panel-cobro-parte-alta-division2">
          <h2>Total: </h2>
          <h2>Entregado:</h2>
        </div>
        <div class="formulario-panel-cobro-parte-alta-division3">
          <div class="formulario-panel-cobro-parte-alta-division3-a">
            <h3 *ngIf="!clienteActual || clienteActual.rol !== 'EMPLEADO'" class="formulario-panel-cobro-parte-alta-division3-a-h3">{{(total)}}€</h3>
            <h3 *ngIf="clienteActual && clienteActual.rol === 'EMPLEADO'" class="formulario-panel-cobro-parte-alta-division3-a-h3">{{(total*0.8).toFixed(2)}}€</h3>


          </div>
          <div *ngIf="compraTarjeta == false" class="formulario-panel-cobro-parte-alta-division3-b">
            <input  class="formulario-panel-cobro-parte-alta-division3-b-input" type="text"  [(ngModel)]="dineroEfectivo" name="dineroEfectivo" placeholder=" ">

          </div>
          <div *ngIf="compraTarjeta == true" class="formulario-panel-cobro-parte-alta-division3-b">
            <h3 class="formulario-panel-cobro-parte-alta-division3-a-h3">{{total}}€</h3>

          </div>
        </div>
      </div>
      <div class="formulario-panel-cobro-parte-baja">

         <div class="formulario-panel-cobro-parte-baja-izquierda" *ngIf="compraEfectiva == false && compraTarjeta == false">
          <button (click)="compraEfectiva = true" class="btn-lateral">Efectivo (F2)</button>
          <button (click)="compraTarjeta = true" class="btn-lateral">Tarjeta (F3)</button>
          <button class="btn-lateral">?</button>
         </div>
        <div class="formulario-panel-cobro-parte-baja-izquierda" *ngIf="compraEfectiva == true">
          <button (click)="terminarCompraEfectivo()" class="btn-lateral">Efectivo (F2)</button>
          <button   class="btn-lateral-oscuro">Tarjeta (F3)</button>
          <button class="btn-lateral-oscuro">?</button>
         </div>

        <div class="formulario-panel-cobro-parte-baja-izquierda" *ngIf="compraTarjeta == true">
          <button   class="btn-lateral-oscuro">Efectivo (F2)</button>
          <button (click)="terminarCompraTarjeta()" class="btn-lateral">Tarjeta (F3)</button>
          <button class="btn-lateral-oscuro">?</button>
         </div>
        <div class="formulario-panel-cobro-parte-baja-derecha">
         </div>
      </div>
      <div *ngIf="compraEfectiva==false && compraTarjeta==false" class="formulario-panel-cobro-parte-botones">
        <button class="formulario-panel-cobro-parte-botones-btn">Aceptar</button>
        <button class="formulario-panel-cobro-parte-botones-btn">Aceptar+Factura</button>
        <button class="formulario-panel-cobro-parte-botones-btn">Cancelar</button>
      </div>
      <div *ngIf="compraEfectiva==true && compraTarjeta==false" class="formulario-panel-cobro-parte-botones">
        <button (click)="terminarCompraEfectivo()" class="formulario-panel-cobro-parte-botones-btn">Aceptar</button>
        <button (click)="terminarCompraEfectivo()" class="formulario-panel-cobro-parte-botones-btn">Aceptar+Factura</button>
        <button (click)="ocultarPanelCobro()" class="formulario-panel-cobro-parte-botones-btn">Cancelar</button>
      </div>
      <div *ngIf="compraEfectiva==false && compraTarjeta==true" class="formulario-panel-cobro-parte-botones">
        <button (click)="terminarCompraEfectivo()" class="formulario-panel-cobro-parte-botones-btn">Aceptar</button>
        <button (click)="terminarCompraEfectivo()" class="formulario-panel-cobro-parte-botones-btn">Aceptar+Factura</button>
        <button (click)="ocultarPanelCobro()" class="formulario-panel-cobro-parte-botones-btn">Cancelar</button>
      </div>
    </div>

    <div (click)="formularioDevolucionDineroEfectivo=false" class="formulario-Devolucion-Efectivo" [hidden]="!formularioDevolucionDineroEfectivo">
      <div class="formulario-devolucion-efectivo-centro">
        <p>Efectivo a devolver: <br>

          {{DineroDevolver}} €</p>
       </div>


    </div>

    <div (click)="formularioDevolucionDineroTarjeta=false" class="formulario-Devolucion-Tarjeta" [hidden]="!formularioDevolucionDineroTarjeta">
      <div class="formulario-devolucion-tarjeta-centro">

        <p >Recuerda no dar dinero en efectivo</p>
      </div>
  </div>


    <div class="formulario-mostrar-Ticket" [hidden]="!formularioConsultarTicket">
      <div class="marco-interior">
        <button (click)="ocultarConsultarTicket()">X</button>
        <input type="text" placeholder="Introduzca número de ticket a consultar...">
        <div class="espacio-interior" >
          <table>
            <thead>
              <tr [hidden]="datosTicket">
                <th>Referencia</th>
                <th>Cliente</th>
                <th>Vendedor</th>
               
                </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let ticket of ticketBD" >
                <tr (dblclick)="seleccionarTicket(ticket)" [hidden]="datosTicket">
                  <td>{{ticket.referencia}}</td>
                  <td>{{ ticket.cliente.nombre }} {{ticket.cliente.apellido1}} {{ticket.cliente.apellido2}}</td>
                  <td>{{ticket.vendedor}}</td>

                 </tr>
              </ng-container>
            </tbody>
          </table>
          <div class="espacio-interior" [hidden]="!datosTicket">
            <button (click)="ocultarDatosTicket()">X</button>
            <p>Referencia: {{ticketActual.referencia}}</p>
            <p>Vendedor: {{ticketActual.vendedor}}</p>
            <p>Fecha: {{ticketActual.fecha}}</p>
            <p>Hora: {{ticketActual.hora}}</p>
            <p>Cliente: {{this.nombreTicketSeleccionado}}</p>
            <p>Productos:</p>
            <table>
              <thead>
                <tr>
                  <th>Referencia</th>
                  <th>Nombre</th>
                  <th>Precio</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let prS of ticketActual.productos">
                  <td>{{ prS.producto.referencia }}</td>
                  <td>{{ prS.producto.nombre }}</td>
                  <td>{{ prS.producto.precio }} €</td>
                </tr>
              </tbody>
            </table>
            
             
          </div>



        </div>
      </div>

    </div>

    <div class="formulario-mostrar-Ticket" [hidden]="!formularioRecuperarTicket">
      <div class="marco-interior">
        <button (click)="ocultarRecuperarTicket()">X</button>
        <div class="espacio-interior">
          <table>
            <thead>
              <tr>
                <th>Cesta</th>
                <th>Contenido</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cesta of conjuntoDeCestas" (dblclick)="recuperarTicket(cesta)">
                <td>{{ cesta[0] }}</td>
                <td>
                  <ul>
                    <li *ngFor="let elemento of cesta.slice(1)">{{ elemento.nombre }}</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>


        </div>

      </div>
    </div>

    <div class="formulario-Datos-Articulo" [hidden]="!formularioDatosArticulo">
      <div class="marco-interior">
        <button (click)="ocultarDatosArticulo()">X</button>
        <div class="espacio-interior"  *ngIf="productoActual != null">
          <div class="form-group">
            <label>Nombre:</label>
            <input type="text" readonly [value]="productoActual.nombre">
          </div>
          <div class="form-group">
           <label>Marca:</label>
          <input type="text" readonly [value]="productoActual.marca">
          </div>

          <div class="form-group">
           <label>Modulo:</label>
           <input type="text" readonly [value]="productoActual.modulo">

           </div>

           <div class="form-group">

          <label>Referencia:</label>
          <input type="text" readonly [value]="productoActual.referencia">
          </div>
          <div class="form-group">

           <label>Precio:</label>
          <input type="text" readonly [value]="productoActual.precio">
          </div>
        </div>
      </div>
    </div>

    <div class="formulario-Datos-Cliente" [hidden]="!formularioDatosCliente">
      <div class="marco-interior-DCliente">
        <button (click)="ocultarDatosCliente()">X</button>
        <div class="espacio-interior-DCliente" *ngIf="clienteActual != null">
          <form class="datos-clientes-interno">
            <label>
              Nombre:
              <input type="text" readonly [value]="clienteActual.nombre">
            </label><br>
            <label>
              Apellido1:
              <input type="text" readonly [value]="clienteActual.apellido1">
            </label><br>
            <label>
              Apellido2:
              <input type="text" readonly [value]="clienteActual.apellido2">
            </label><br>
            <label>
              DNI:
              <input type="text" readonly [value]="clienteActual.dni">
            </label><br>
            <label>
              Código postal:
              <input type="text" readonly [value]="clienteActual.codigoPostal">
            </label><br>
            <label>
              Localidad:
              <input type="text" readonly [value]="clienteActual.localidad">
            </label><br>
            <label>
              Número de Telefono:
              <input type="text" readonly [value]="clienteActual.numeroTelefono">
            </label><br>
            <label>
              Número de móvil:
              <input type="text" readonly [value]="clienteActual.numeroMovil">
            </label>
          </form>
        </div>
        
      </div>
    </div>

    <div class="formulario-Datos-Cliente" [hidden]="!formularioCrearcliente">
      <div class="marco-interior-crear-cliente">
        <button (click)="ocultarCrearCliente()">X</button>
        <div class="espacio-interior-DCliente">
          <form (submit)="crearCliente()" class="datos-clientes-interno">
            <div class="form-group">
              <label>Nombre:</label>
              <input type="text" [(ngModel)]="nuevoCliente.nombre" name="nombre" required>
            </div>
            <div class="form-group">
              <label>Primer apellido:</label>
              <input type="text" [(ngModel)]="nuevoCliente.apellido1" name="apellido1" required>
            </div>
            <div class="form-group">
              <label>Segundo apellido:</label>
              <input type="text" [(ngModel)]="nuevoCliente.apellido2" name="apellido2" required>
            </div>
            <div class="form-group">
              <label>Código postal:</label>
              <input type="text" [(ngModel)]="nuevoCliente.codigoPostal" name="codigoPostal" required>
            </div>
            <div class="form-group">
              <label>DNI:</label>
              <input type="text" [(ngModel)]="nuevoCliente.dni" name="dni" required>
            </div>
            <div class="form-group">
              <label>Email:</label>
              <input type="text" [(ngModel)]="nuevoCliente.email" name="email" required>
            </div>
            <div class="form-group">
              <label>Localidad:</label>
              <input type="text" [(ngModel)]="nuevoCliente.localidad" name="localidad" required>
            </div>
            <div class="form-group">
              <label>Número de móvil:</label>
              <input type="text" [(ngModel)]="nuevoCliente.numeroMovil" name="numeroMovil" required>
            </div>
            <div class="form-group">
              <label>Número de teléfono:</label>
              <input type="text" [(ngModel)]="nuevoCliente.numeroTelefono" name="numeroTelefono" required>
            </div>
            <div class="form-group">
              <label>Dirección:</label>
              <input type="text" [(ngModel)]="nuevoCliente.direccion" name="direccion" required>
            </div>
            <button type="submit" class="btn-crear-cliente">Crear cliente</button>
          </form>
          

         </div>
          
      </div>
    </div>

    <div class="formulario-Datos-Cliente" [hidden]="!formularioModificarcliente">
      <div class="marco-interior-DCliente">
        <button (click)="ocultarModificarCliente()">X</button>
        <div class="espacio-interior-modificar-cliente" *ngIf="clienteActual != null" >
          <form (ngSubmit)="guardarModificacionCliente()" class="datos-clientes-interno">
           <input type="text" placeholder="Nombre" id="clienteNombre" name="clienteNombre"  [(ngModel)]="clienteActual.nombre">
          <input type="text" placeholder="Apellido 1" id="apellido1" name="apellido1"  [(ngModel)]="clienteActual.apellido1">
          <input type="text" placeholder="Apellido 2" id="apellido2" name="apellido2"  [(ngModel)]="clienteActual.apellido2">
          <input type="text" placeholder="DNI" id="dni" name="dni"  [(ngModel)]="clienteActual.dni">
          <input type="text" placeholder="Dirección" id="direccion" name="direccion"  [(ngModel)]="clienteActual.direccion">
          <input type="text" placeholder="Código postal" id="codigoPostal" name="codigoPostal"  [(ngModel)]="clienteActual.codigoPostal">
          <input type="text" placeholder="Localidad" id="localidad" name="localidad"  [(ngModel)]="clienteActual.localidad">
          <input type="text" placeholder="Telefono" id="telefono" name="telefono"  [(ngModel)]="clienteActual.numeroTelefono">
          <input type="text" placeholder="Móvil" id="movil" name="movil"  [(ngModel)]="clienteActual.numeroMovil">
          <input type="text" placeholder="Correo Electrónico" id="email" name="email"  [(ngModel)]="clienteActual.email">
          <button type="submit">Guardar</button>
          <button>Cancelar</button>
        </form>
         </div>

      </div>
    </div>

    <div class="formulario-devolver-Ticket" [hidden]="!formularioDevolverTicket">
      <div class="marco-interior-morado">
        <button (click)="ocultarDevolverTicket()">X</button>
        <input type="text" placeholder="Introduzca número de ticket a devolver...">
        <div class="espacio-interior-morado">
          <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nam facilis minima laboriosam repellendus corrupti corporis excepturi libero, vel dolorem sunt.</p>
        </div>
      </div>
    </div>


    <div class="formulario-cierre-caja" [hidden]="!formularioCierreCaja">
      <div class="marco-interior-gris">
        <button (click)="ocultarCierreCaja()">X</button>
        <div class="espacio-interior-gris">
          <div class="money-form">
            <div class="column">
              <h2>Billetes</h2>
              <form>
                <label for="bill-100">100€:</label>
                <input type="number" name="bill-100" id="bill-100" min="0" step="1">
                <br>
                <label>$50:</label>
                <input type="number" name="bill-50" min="0" step="1">
                <br>
                <label>$20:</label>
                <input type="number" name="bill-20" min="0" step="1">
                <br>
                <label>$10:</label>
                <input type="number" name="bill-10" min="0" step="1">
                <br>
                <label>$5:</label>
                <input type="number" name="bill-5" min="0" step="1">
                <br>
                <label>$1:</label>
                <input type="number" name="bill-1" min="0" step="1">
                <br>
              </form>
            </div>
            <div class="column">
              <h2>Monedas</h2>
              <form>
                <label>$0.50:</label>
                <input type="number" name="coin-50" min="0" step="0.01">
                <br>
                <label>$0.25:</label>
                <input type="number" name="coin-25" min="0" step="0.01">
                <br>
                <label>$0.10:</label>
                <input type="number" name="coin-10" min="0" step="0.01">
                <br>
                <label>$0.05:</label>
                <input type="number" name="coin-05" min="0" step="0.01">
                <br>
                <label>$0.01:</label>
                <input type="number" name="coin-01" min="0" step="0.01">
                <br>
              </form>
            </div>
          </div>

        </div>
        <button>Siguiente</button>
      </div>
    </div>

  </body>
</html>

